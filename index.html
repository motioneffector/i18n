<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@motioneffector/i18n - Demo</title>
  <link rel="stylesheet" href="demo-files/demo.css">
</head>
<body>
  <div class="page">
    <header class="header">
      <h1 class="header-title">@motioneffector/i18n</h1>
      <p class="header-description">A lightweight, type-safe internationalization library with zero dependencies</p>
      <nav class="header-links">
        <a href="https://www.npmjs.com/package/@motioneffector/i18n" class="header-link" target="_blank">
          npm
        </a>
        <a href="https://github.com/motioneffector/i18n" class="header-link" target="_blank">
          GitHub
        </a>
        <a href="manual/index.html" class="header-link">
          Manual
        </a>
      </nav>
    </header>

    <main>
      <!-- Test Runner (FIRST, before exhibits) -->
      <section class="test-runner" id="test-runner">
        <div class="test-runner-header">
          <h2 class="test-runner-title">Test Runner</h2>
        </div>
        <div class="test-runner-content">
          <!-- Control bar: progress bar + buttons, above output console -->
          <div class="test-control-bar">
            <div class="test-progress">
              <div class="test-progress-bar">
                <div class="test-progress-fill" id="progress-fill"></div>
              </div>
              <div class="test-progress-text" id="progress-text">Ready</div>
            </div>
            <div class="test-runner-actions">
              <button class="btn btn-primary" id="run-all-tests">
                <span class="btn-icon">▶</span>
                <span>Run All Tests</span>
              </button>
              <button class="btn btn-secondary" id="reset-page">
                <span class="btn-icon">↻</span>
                <span>Reset Page</span>
              </button>
            </div>
          </div>
          <!-- Output console below the control bar -->
          <div class="test-output" id="test-output">
            <div class="test-output-placeholder">Click "Run All Tests" to execute the test suite and see a live demonstration</div>
          </div>
          <div class="test-summary hidden" id="test-summary"></div>
        </div>
      </section>

      <!-- Exhibit 1: Plural Rule Visualizer -->
      <section class="exhibit" id="exhibit-plural">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Plural Rule Visualizer</h2>
          <p class="exhibit-description">Watch how Intl.PluralRules selects different forms for different languages. The same number can trigger different rules!</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="plural-slider-container">
              <input type="range" class="plural-slider" id="plural-slider" min="0" max="100" value="21">
              <div class="plural-count-display">count: <span id="plural-count">21</span></div>
            </div>

            <div class="plural-comparison">
              <div class="plural-locale" id="plural-locale-1">
                <div class="plural-locale-header">
                  <span class="plural-locale-name">English (en)</span>
                  <span class="tag tag-blue">2 forms</span>
                </div>
                <div class="plural-forms-table" id="plural-forms-en"></div>
                <div class="plural-api-call" id="plural-api-en"></div>
              </div>

              <div class="plural-locale" id="plural-locale-2">
                <div class="plural-locale-header">
                  <span class="plural-locale-name">Russian (ru)</span>
                  <span class="tag tag-purple">4 forms</span>
                </div>
                <div class="plural-forms-table" id="plural-forms-ru"></div>
                <div class="plural-api-call" id="plural-api-ru"></div>
              </div>
            </div>

            <div class="plural-result">
              <div class="plural-result-label">Translation Output</div>
              <div class="flex gap-lg justify-between" style="margin-top: var(--space-sm);">
                <div>
                  <div class="text-muted" style="font-size: var(--font-size-xs);">English</div>
                  <div class="plural-result-value" id="plural-result-en"></div>
                </div>
                <div>
                  <div class="text-muted" style="font-size: var(--font-size-xs);">Russian</div>
                  <div class="plural-result-value" id="plural-result-ru"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="exhibit-controls">
            <button class="btn btn-secondary btn-small" data-locale-pair="en-ru" data-active="true">English / Russian</button>
            <button class="btn btn-secondary btn-small" data-locale-pair="en-ar">English / Arabic</button>
            <button class="btn btn-secondary btn-small" data-locale-pair="de-pl">German / Polish</button>
          </div>

          <div class="exhibit-state">
            <div class="exhibit-state-title">API Call</div>
            <div id="plural-state" class="font-mono"></div>
          </div>
        </div>
      </section>

      <!-- Exhibit 2: Interpolation Machine -->
      <section class="exhibit" id="exhibit-interp">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Interpolation Machine</h2>
          <p class="exhibit-description">See how template placeholders get replaced with actual values. Watch the substitution happen step by step.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="interp-container">
              <div class="interp-section">
                <div class="interp-section-label">Template</div>
                <div class="interp-template" id="interp-template"></div>
              </div>

              <div class="interp-arrow">&#8595;</div>

              <div class="interp-section">
                <div class="interp-section-label">Parameters</div>
                <div class="interp-params" id="interp-params"></div>
              </div>

              <div class="interp-arrow">&#8595;</div>

              <div class="interp-section">
                <div class="interp-section-label">Output</div>
                <div class="interp-output" id="interp-output"></div>
              </div>
            </div>
          </div>

          <div class="exhibit-controls">
            <button class="btn btn-primary btn-small" id="interp-animate">Animate Substitution</button>
            <button class="btn btn-secondary btn-small" id="interp-reset">Reset</button>
          </div>

          <div class="exhibit-state">
            <div class="exhibit-state-title">Translation Call</div>
            <div id="interp-state" class="font-mono"></div>
          </div>
        </div>
      </section>

      <!-- Exhibit 3: Format Dissector -->
      <section class="exhibit" id="exhibit-format">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Format Dissector</h2>
          <p class="exhibit-description">Examine the anatomy of formatted numbers. See how thousand separators, decimal marks, and symbol positions differ across locales.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="format-container">
              <div class="format-input-row">
                <label>Value:</label>
                <input type="number" class="input input-mono format-input" id="format-value" value="1234567.89">
                <label>Format:</label>
                <select class="input" id="format-type">
                  <option value="currency" selected>Currency (USD)</option>
                  <option value="decimal">Decimal</option>
                  <option value="percent">Percent</option>
                  <option value="compact">Compact</option>
                </select>
              </div>

              <div class="format-anatomy" id="format-anatomy"></div>

              <div class="format-comparison" id="format-comparison">
                <div class="format-comparison-title" id="format-comparison-title">Thousand Separator Comparison</div>
                <div class="format-comparison-grid" id="format-comparison-grid"></div>
              </div>
            </div>
          </div>

          <div class="exhibit-controls">
            <button class="btn btn-secondary btn-small format-part-btn" data-part="thousand" data-active="true">Thousand Sep</button>
            <button class="btn btn-secondary btn-small format-part-btn" data-part="decimal">Decimal Sep</button>
            <button class="btn btn-secondary btn-small format-part-btn" data-part="symbol">Symbol Position</button>
            <button class="btn btn-secondary btn-small format-part-btn" data-part="digits">Digit Grouping</button>
          </div>

          <div class="exhibit-state">
            <div class="exhibit-state-title">Format Call</div>
            <div id="format-state" class="font-mono"></div>
          </div>
        </div>
      </section>

      <!-- Exhibit 4: Translation Tree Walker -->
      <section class="exhibit" id="exhibit-tree">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Translation Tree Walker</h2>
          <p class="exhibit-description">Visualize how dot-notation keys traverse the translation structure. See exactly where lookups succeed or fail.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="tree-container">
              <div class="tree-input-row">
                <input type="text" class="input input-mono tree-key-input" id="tree-key" value="common.buttons.save" placeholder="Enter a key...">
                <button class="btn btn-primary" id="tree-lookup">Look Up</button>
              </div>

              <div class="tree-visualization" id="tree-viz"></div>

              <div class="tree-path" id="tree-path"></div>

              <div class="tree-result" id="tree-result">
                <div>
                  <div class="tree-result-label">Result</div>
                  <div class="tree-result-value" id="tree-result-value"></div>
                </div>
                <div class="tree-suggestions">
                  <span class="text-muted" style="font-size: var(--font-size-xs);">Try:</span>
                  <button class="btn btn-secondary btn-small tree-suggestion" data-key="common.buttons.nope">common.buttons.nope</button>
                  <button class="btn btn-secondary btn-small tree-suggestion" data-key="messages.greeting">messages.greeting</button>
                </div>
              </div>
            </div>
          </div>

          <div class="exhibit-state">
            <div class="exhibit-state-title">Lookup Path</div>
            <div id="tree-state" class="font-mono"></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Library (from dist) -->
  <script type="module">
    import * as Library from './dist/index.js'
    window.Library = Library
  </script>

  <!-- Demo scripts (order matters) -->
  <script src="demo-files/test-runner.js"></script>
  <script src="demo-files/demo.js"></script>
  <script src="demo-files/tests.js"></script>
</body>
</html>
